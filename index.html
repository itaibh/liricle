<!DOCTYPE html>
<html lang="en">

<head>
    <title>Liricle</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        body {
            box-sizing: border-box;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .lyric {
            font-family: sans-serif;
            font-size: 2rem;
            font-weight: bold;
            line-height: 1.5;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <audio controls class="audio"></audio>
    <div class="lyric">lyric will appear here...</div>

    <!-- <script src="src/parser.js"></script>
    <script src="dist/liricle.js"></script> -->
    <script type="module">
        import Liricle from "./src/liricle.js";

        const BASE_URL = "https://raw.githubusercontent.com/mcanam/assets/main/liricle-demo/";
        // const BASE_URL = "assets/";

        const $audio = document.querySelector(".audio");
        const $lyric = document.querySelector(".lyric");
        
        $audio.src = BASE_URL + "audio.mp3";
        
        //////////////////////////////////////////////////
          
        const liricle = new Liricle();
        
        liricle.init({ url: "assets/lyric-enhanced.lrc" });

        liricle.on("init", (data) => {
            console.log(data);
        });
        
        liricle.on("sync", (index, text) => {
            $lyric.innerText = text;
            // console.log("=> line index: " + index + "\n" + "=> lyric text: " + text);
        });
        
        $audio.addEventListener("timeupdate", () => {
            const time = $audio.currentTime;
            liricle.sync(time, -0.9); // sync lyric
        });
    </script>
</body>

</html>
