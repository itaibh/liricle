<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>liricle</title>
</head>

<body>
    <audio controls class="player"></audio>
    <div class="display">lyric will appear here...</div>

    <script src="dist/liricle.js"></script>
    <script>
        // assets base url ( for demo only )
        const BASE_URL = "https://cdn.jsdelivr.net/gh/mcanam/assets/liricle-demo/";

        // get element
        const player = document.querySelector(".player");
        const display = document.querySelector(".display");
        
        // load audio
        player.src = BASE_URL + "audio.mp3";
        
        // create liricle instance
        const liricle = new Liricle();
        
        // fetch lrc file
        fetch(BASE_URL + "lyric.lrc").then(async res => {
            const text = await res.text();
            
            // initialize liricle
            liricle.init(text, (info, lines) => {
                // do something with this callback...
            });
            
            // listen player time update event
            player.ontimeupdate = () => {
                // get player current time
                const time = player.currentTime;
                
                // sync lyrics
                liricle.sync(time, (index, text) => {
                    // print text to display element
                    display.innerText = text;
                });
            }
        });
    </script>
</body>

</html>
