var t,e;t=this,e=function(){"use strict";function t(t){let e=Math.floor(t/60),i=(t%60).toFixed(2);return e=e<10?"0"+e:e,i=i<10?"0"+i:i,e+":"+i}function e(t){const e=t.split(":"),i=60*parseInt(e[0]),n=parseFloat(e[1]);return parseFloat((i+n).toFixed(2))}return class{constructor(){this.data={},this.map={},this.lines=[],this.activeLine=null}init(i,n=(()=>{})){this.data=function(t){const e=t.split("\n"),i={info:{},timeline:[]};return e.forEach((t=>{if(!t)return;const e=t.match(/\[(?<meta>.*)\]((?<text>.*))?/);if(!e||!e.groups)return console.warn("invalid line: '"+t+"'");const{meta:n,text:s}=e.groups;if(/\d+:\d\d\.\d+/.test(n))i.timeline.push({time:n,text:s||""});else{const t=n.split(":"),e=t[0],s=t[1];i.info[e]=s}})),i}(i),this.map=function(i){const n=i.timeline,s={};return n.forEach(((i,o)=>{let r=i.time,a=n[o+1];if(!a)return;r=e(r),a=e(a.time);const c=a-r;let l=0;for(;l<c;){const e=t(r+l),n=i.text;s[e]=[o,n],l+=.01}})),s}(this.data);const{info:s,timeline:o}=this.data;o.forEach((t=>{this.lines.push(t.text)})),n(s,this.lines)}sync(e,i=(()=>{})){const n=t(e),s=this.map[n];if(!s)return;const[o,r]=s;this.activeLine!=o&&(i(o,r),this.activeLine=o)}}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Liricle=e();
