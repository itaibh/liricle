<!DOCTYPE html>
<html lang="en">

<head>
    <title>liricle</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>
        body {
            box-sizing: border-box;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .lyric {
            font-family: sans-serif;
            font-size: 2rem;
            font-weight: bold;
            line-height: 1.5;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <audio controls class="audio"></audio>
    <div class="lyric">lyric will appear here...</div>

    <script src="dist/liricle.js"></script>
    <script type="module">
        const BASE_URL = "https://raw.githubusercontent.com/mcanam/assets/main/liricle-demo/";

        const $audio = document.querySelector(".audio");
        const $lyric = document.querySelector(".lyric");
        
        $audio.src = BASE_URL + "audio.mp3";
        
        //////////////////////////////////////////////////
                
        const liricle = new Liricle();
        
        liricle.init({ url: BASE_URL + "lyric.lrc" });
        
        liricle.on("init", (info, data) => {
            console.log(info, data);
        });
        
        liricle.on("sync", (index, text) => {
            // console.log(index, text);
            $lyric.innerText = text;
        });
        
        $audio.addEventListener("timeupdate", () => {
            const time = $audio.currentTime;
            liricle.sync(time, 0); // sync lyric
        });
        
    </script>
</body>

</html>
